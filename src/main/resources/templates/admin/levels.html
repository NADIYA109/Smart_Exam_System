<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org"
	th:replace="~{Level-Layout :: layout(~{::title} , ~{::section},~{::script},~{::style}, ~{::li}) }">

<head>
	<meta charset="UTF-8">
	<title>Select Course</title>
	<script>
		$(document).ready(function () {
			$('#course').change(function () {
				var courseId = $(this).val();
				$('#courseForm').attr('action', '/admin/levels/course/' + courseId);
			});

			$('#course').trigger('change');

			$('#addLevelLink').click(function (e) {
				e.preventDefault(); // Prevent default link behavior
				let courseId = $('#course').val();
				window.location.href = '/admin/levels/course/' + courseId + "/addLevel"; // Navigate to the specified URL with courseId
			});
		});

	</script>
	<style>
		.container {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: space-between;
			/* Adjust vertical alignment */
			width: 400px;
			/* Adjust width as needed */
			height: 200px;
			margin: 50px auto;
			border: 1px solid #ccc;
			padding: 30px;
			/* Increased padding for more space */
			border-radius: 5px;
			background-color: #f2f2f2;
			/* Light gray background */
			z-index: 1;
			/* Container on top of base layer */
		}

		.container h2 {
			margin-bottom: 20px;
			text-decoration: underline;
			/* Underline the title */
			z-index: 2;
			/* Title above dropdown and container */
		}

		.form-group {
			display: flex;
			align-items: center;
			margin-bottom: 10px;
		}

		.form-group label {
			margin-right: 20px;
			/* Increased spacing between label and dropdown */
			font-size: 18px;
			/* Increase label size */
		}

		select#course {
			width: 200px;
			/* Increase dropdown size */
			height: 30px;
			/* Increase dropdown size */
			font-size: 16px;
			/* Increase dropdown font size */
			padding: 5px;
			/* Add padding for better spacing */
			border: 1px solid #ccc;
			/* Add border for dropdown */
			border-radius: 3px;
			/* Add border radius for dropdown */
		}

		input[type="submit"] {
			margin-top: 20px;
			/* Add space above the button */
			padding: 10px 20px;
			/* Increase button size */
			border: none;
			/* Remove default border */
			background-color: #333;
			/* Set button color */
			color: white;
			/* Set button text color */
			font-size: 16px;
			/* Increase button font size */
			cursor: pointer;
			/* Set cursor to pointer on hover */
			border-radius: 5px;
			/* Add border radius for button */
			transition: background-color 0.2s ease;
			/* Smooth transition effect */
			z-index: 2;
			/* Button above dropdown and container */
		}

		input[type="submit"]:hover {
			background-color: #4CAF50;
			/* Change button color on hover */
		}
	</style>
</head>

<body>
	<li th:if="${selectedCourseId != null}" class="nav-item" the><a class="nav-link active" aria-current="page"
			id="addLevelLink">Add Level</a></li>
	<section>
		<div class="container">
			<h2>Select Course</h2>
			<form id="courseForm" method="get">
				<div class="form-group">
					<label for="course">Choose a course:</label>
					<select name="course" id="course">
						<option th:each="c:${courses}" th:value="${c.id}" th:selected="${c.id == selectedCourseId}">
							[[${c.name}]]</option>
					</select>
				</div>
				<input type="submit" value="Select Course">
			</form>
		</div>
		<div class="container">
			<h4 class="text-center">All Levels for the Selected Course:</h4>
			<table class="table table-striped table-bordered">
				<thead>
					<tr>
						<th scope="col">Serial Number</th>
						<th scope="col">Levels</th>
						<th scope="col">Action</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="level, rowStat : ${levels}">
						<td th:text="${rowStat.count}"></td>
						<td th:text="${level.name}"></td>
						<td>
							<a th:href="@{/admin/course/{selectedCourseId}/level/{levelId}/assignQuestions(selectedCourseId=${selectedCourseId}, levelId=${level.id})}" class="btn btn-sm btn-primary">Assign/Update question</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</section>
</body>

</html>